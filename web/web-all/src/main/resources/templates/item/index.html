<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
    <div style="visibility: hidden;" class="J-content toolbar-panel tbar-panel-history toolbar-animate-in">
        <h3 class="tbar-panel-header J-panel-header">
            <a href="#" target="_blank" class="title">
                <i></i>
                <em class="title">My tracks</em>
            </a>
            <span class="close-panel J-close" onclick="cartPanelView.tbar_panel_close('history');"></span>
        </h3>
        <div class="tbar-panel-main">
            <div class="tbar-panel-content J-panel-content">
                <div class="jt-history-wrap">
                    <ul>
                        <!--<li class="jth-item">
                        <a href="#" class="img-wrap"> <img src="../../.../portal/img/like_03.png" height="100" width="100" /> </a>
                        <a class="add-cart-button" href="#" target="_blank">Add to cart</a>
                        <a href="#" target="_blank" class="price">￥498.00</a>
                        </li>
                        <li class="jth-item">
                        <a href="#" class="img-wrap"> <img src="../../../portal/img/like_02.png" height="100" width="100" />< /a>
                        <a class="add-cart-button" href="#" target="_blank">Add to cart</a>
                        <a href="#" target="_blank" class="price">￥498.00</a>
                        </li>-->
                    </ul>
                    <a href="#" class="history-bottom-more" target="_blank">View more footprint products &gt;&gt;</a>
                </div>
            </div>
        </div>
        <div class="tbar-panel-footer J-panel-footer"></div>
    </div>

    </div>

    <div class="toolbar-header"></div>

    <!-- Sidebar button -->
    <div class="toolbar-tabs J-tab">
        <div onclick="cartPanelView.tabItemClick('cart')" class="toolbar-tab tbar-tab-cart" data="shopping cart" tag="cart">
            <i class="tab-ico"></i>
            <em class="tab-text"></em>
            <span class="tab-sub J-count "id="tab-sub-cart-count">0</span>
        </div>
        <div onclick="cartPanelView.tabItemClick('follow')" class="toolbar-tab tbar-tab-follow" data="my attention" tag="follow">
            <i class="tab-ico"></i>
            <em class="tab-text"></em>
            <span class="tab-sub J-count hide">0</span>
        </div>
        <div onclick="cartPanelView.tabItemClick('history')" class="toolbar-tab tbar-tab-history" data="My footprint" tag="history">
            <i class="tab-ico"></i>
            <em class="tab-text"></em>
            <span class="tab-sub J-count hide">0</span>
        </div>
    </div>

    <div class="toolbar-footer">
        <div class="toolbar-tab tbar-tab-top">
            <a href="#">
                <i class="tab-ico "></i>
                <em class="footer-tab-text">Top</em>
            </a>
        </div>
        <div class="toolbar-tab tbar-tab-feedback">
            <a href="#" target="_blank">
                <i class="tab-ico"></i>
                <em class="footer-tab-text ">Feedback</em>
            </a>
        </div>
                        <a th:href="@{http://list.gmall.com/list.html?category1Id={category1Id}(category1Id=${categoryView.category1Id})}" th:text="${categoryView.category1Name}">手机、数码、通讯</a>
                        </li>
                        <li>
                            <a th:href="@{http://list.gmall.com/list.html?category2Id={category2Id}(category2Id=${categoryView.category2Id})}" th:text="${categoryView.category2Name}">手机</a>
                        </li>
                        <li>
                            <a th:href="@{http://list.gmall.com/list.html?category3Id={category3Id}(category3Id=${categoryView.category3Id})}" th:text="${categoryView.category3Name}">Apple苹果</a>
                        </li>
                        <li class="active" th:text="${skuInfo.skuName}">iphone 6S系类</li>
                        </ul>
                    </div>
    <!--product-info-->
    <div class="product-info">
        <div class="fl preview-wrap">
            <!--Magnifying glass effect-->
            <div class="zoom">
                <!--Default first preview-->
                <div id="preview" class="spec-preview hm-display-statistics" th:attr="hm-display=|{'displayType':'query','item_type':'sku_id','item': ${skuInfo.id},'order':1}|">
                     <span class="jqzoom">
                        <img th:jqimg="${skuInfo.skuDefaultImg}" th:src="${skuInfo.skuDefaultImg}" width="400" height="400"/>
                     </span>
                </div>
                <!--Thumbnail below-->
                <div class="spec-scroll">
                    <a class="prev">&lt;</a>
                    <!--Left and right buttons-->
                    <div class="items">
                        <ul>
                            <li th:each="skuImage: ${skuInfo.skuImageList}">
                                <img th:src="${skuImage.imgUrl}" th:bimg="${skuImage.imgUrl}" onmousemove="preview(this)"/>
                            </li>
                        </ul>
                    </div>
                    <a class="next">&gt;</a>
                </div>
            </div>


            <div class="preview-info" style="margin-top: 20px">
                <div class="left-btns">
                    <a class="follow J-follow followed hm-action-statistics" href="#none" @click="addFavor()" :hm-action = "'{\'action_id\':\'favor_add\', \'item_type\': \'skuId\', \'item\':'+skuId+'}'">
                        <i class="sprite-follow-sku"></i><em>{{ favorLable }}</em>
                    </a>
                    <a class="share J-share" href="#none">
                        <i class="sprite-share"></i><em>Share</em>
                    </a>
                    <a class="compare J-compare J_contrast" href="#none">
                        <i class="sprite-compare"></i><em>Compare</em>
                    </a>
                </div>
            </div>

        </div>
        <div class="fr itemInfo-wrap" id="app">
            <div class="sku-name">
                <h4 th:text="${skuInfo.skuName}"></h4>
            </div>
            <div class="news">
                <span>Recommend to choose [mobile discount purchase] below, the mobile phone package will be completed, there is no need to change the number, and there will be a monthly cost rebate</span>
            </div>
            <div class="summary">
                <div class="summary-wrap">
                    <div class="fl title">
                        <i>Price 　　格</i>
                    </div>
                    <div class="fl price">
                        <i>¥</i>
                        <em><span th:text="${price}">4499.00</span></em>
                        <span>Notice of price reduction</span>
                    </div>
                    <div class="fr remark">
                        <i>Cumulative reviews</i>
                        <em>11111</em>
                    </div>
                </div>
                <div class="summary-wrap" v-if="couponInfoList !== undefined && couponInfoList.length> 0">
                    <div class="fl title">
                        <i>Vouchers</i>
                    </div>
                    <div class="fl fix-width">
                        <div class="fl fix-width" @click="couponMore()">
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='CASH'">Cash coupon {{ couponInfo.benefitAmount }} yuan</i></a>
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='DISCOUNT'">Discount coupon {{ couponInfo.benefitDiscount }} discount</i></a>
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='FULL_REDUCTION'">Full {{ couponInfo.conditionAmount }} minus {{ couponInfo.benefitAmount }} yuan</i></a>
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='FULL_DISCOUNT'">full {{ couponInfo.conditionNum }} {{ couponInfo.benefitDiscount }} discount</i></a>
                            <a href="#none" v-if="couponInfoList.length> 3" class="coupon-more">More</a>
                        </div>
                    </div>
                </div>
                <div class="summary-wrap" v-if="activityRuleList !== undefined && activityRuleList.length> 0">
                    <div class="fl title">
                        <i>Promote 　　 sales</i>
                    </div>
                    <div class="fl fix-width">
                        <div v-for="activityRule in activityRuleList" :key="activityRule.id">
                            <i class="red-bg">{{ activityRule.activityType =='FULL_REDUCTION'?'Full reduction':'Discount' }}</i>
                            <em class="t-gray" v-if="activityRule.activityType =='FULL_REDUCTION'">Full {{ activityRule.conditionAmount }} minus {{ activityRule.benefitAmount }} yuan </em>
                            <em class="t-gray" v-if="activityRule.activityType =='FULL_DISCOUNT'">full {{ activityRule.conditionNum}} {{ activityRule.benefitDiscount }} discount</em>
                        </div>
                    </div>
                </div>
            </div>
            <div class="support">
                <div class="summary-wrap">
                    <div class="fl title">
                        <i>Support 　　Support</i>
                    </div>
                    <div class="fl fix-width">
                        <em class="t-gray">Trade the old for the new, recycle the idle mobile phone. The 4G package is great value to grab the gift purchase</em>
                    </div>
                </div>
                <div class="summary-wrap">
                    <div class="fl title">
                        <i>Delivered to</i>
                    </div>
                    <div class="fl fix-width">
                        <em class="t-gray">Over 999.00 plus 20.00 yuan, or over 1999.00 plus 30.00 yuan, or over 2999.00 plus 40.00 yuan, you can redeem hot-selling items in the shopping cart</em>
                    </div>
                </div>
                        <div class="summary-wrap">
                            <div class="fl title">
                                <i>重   量</i>
                            </div>
                            <div class="fl fix-width">
                                <em class="t-gray" th:text="${skuInfo.weight}"></em>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix choose">
                        <div id="specification" class="summary-wrap clearfix">


                            <dl v-for="spuSaleAttr in spuSaleAttrList" :key="spuSaleAttr.id">
                                <dt>
                                    <div class="fl title">
                                        <i>{{spuSaleAttr.saleAttrName}}</i>
                                    </div>
                                </dt>
                                <dd v-for="spuSaleAttrValue in spuSaleAttr.spuSaleAttrValueList" :key="spuSaleAttrValue.id" @click="spuSaleAttrFun(spuSaleAttr.index, spuSaleAttrValue.id)">
                                    <a href="javascript:;" :class="{'selected':spuSaleAttrValue.isChecked == 1}">{{spuSaleAttrValue.saleAttrValueName}}<span title="点击取消选择">&nbsp;</span></a>
                                </dd>
                            </dl>

                        </div>

                        <div class="summary-wrap">
                            <div class="fl title">
                                <div class="control-group">
                                    <div class="controls">
                                        <input autocomplete="off" type="text" :value="skuNum" minnum="1" class="itxt" />
                                        <a href="javascript:void(0)" class="increment plus hm-action-statistics" @click="add()" th:attr="hm-action=|{'action_id':'cart_add','item_type':'sku_id','item':${skuInfo.id}}|">+</a>
                                        <a href="javascript:void(0)" class="increment mins hm-action-statistics" @click="down()" th:attr="hm-action=|{'action_id':'cart_down','item_type':'sku_id','item':${skuInfo.id}}|">-</a>
                                    </div>
                                </div>
                            </div>
                            <div class="fl">
                                <ul class="btn-choose unstyled">
                                    <li>
                                        <a href="javascript:void(0);" v-if="isAddCart" @click="addToCart()" class="sui-btn  btn-danger addshopcar">加入购物车</a>
                                        <a href="javascript:void(0);" v-if="!isAddCart" class="sui-btn  btn-danger addshopcar" disabled="disabled">加入购物车</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--product-detail-->
            <div class="clearfix product-detail">
                <div class="fl aside">
                    <ul class="sui-nav nav-tabs tab-wraped">
                        <li class="active">
                </div>
                <div class="summary-wrap" v-if="couponInfoList !== undefined && couponInfoList.length> 0">
                    <div class="fl title">
                        <i>Vouchers</i>
                    </div>
                    <div class="fl fix-width">
                        <div class="fl fix-width" @click="couponMore()">
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='CASH'">Cash coupon {{ couponInfo.benefitAmount }} yuan</i></a>
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='DISCOUNT'">Discount coupon {{ couponInfo.benefitDiscount }} discount</i></a>
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='FULL_REDUCTION'">Full {{ couponInfo.conditionAmount }} minus {{ couponInfo.benefitAmount }} yuan</i></a>
                            <a href="#none" v-for="(couponInfo, index) in couponInfoList" :key="couponInfo.id" v-if="index <3" :title="couponInfo.couponName"><i class ="red-bg i-coupon" v-if="couponInfo.couponType =='FULL_DISCOUNT'">full {{ couponInfo.conditionNum }} {{ couponInfo.benefitDiscount }} discount</i></a>
                            <a href="#none" v-if="couponInfoList.length> 3" class="coupon-more">More</a>
                        </div>
                    </div>
                </div>
                <div class="summary-wrap" v-if="activityRuleList !== undefined && activityRuleList.length> 0">
                    <div class="fl title">
                        <i>Promote 　　 sales</i>
                    </div>
                    <div class="fl fix-width">
                        <div v-for="activityRule in activityRuleList" :key="activityRule.id">
                            <i class="red-bg">{{ activityRule.activityType =='FULL_REDUCTION'?'Full reduction':'Discount' }}</i>
                            <em class="t-gray" v-if="activityRule.activityType =='FULL_REDUCTION'">Full {{ activityRule.conditionAmount }} minus {{ activityRule.benefitAmount }} yuan </em>
                            <em class="t-gray" v-if="activityRule.activityType =='FULL_DISCOUNT'">full {{ activityRule.conditionNum}} {{ activityRule.benefitDiscount }} discount</em>
                        </div>
                    </div>
                </div>
            </div>
    <div class="support">
        <div class="summary-wrap">
            <div class="fl title">
                <i>Support 　　Support</i>
            </div>
            <div class="fl fix-width">
                <em class="t-gray">Trade the old for the new, recycle the idle mobile phone. The 4G package is great value to grab the gift purchase</em>
            </div>
        </div>
        <div class="summary-wrap">
            <div class="fl title">
                <i>Delivered to</i>
            </div>
            <div class="fl fix-width">
                <em class="t-gray">Over 999.00 plus 20.00 yuan, or over 1999.00 plus 30.00 yuan, or over 2999.00 plus 40.00 yuan, you can redeem hot-selling items in the shopping cart</em>
            </div>
        </div>
    </div>
    <div class="price">
        <strong>
            <em>¥</em>
            <i>6088.00</i>
        </strong>
    </div>
    <div class="operate">
        <a href="javascript:void(0);" class="sui-btn btn-bordered">Add to cart</a>
    </div>
    </div>
    <div class="list-wrap">
        <div class="p-img">
            <img src="./img/_/part02.png"/>
        </div>
        <div class="attr">
            <em>Apple iPhone 6s (A1699)</em>
        </div>
        <div class="price">
            <strong>
                <em>¥</em>
                <i>6088.00</i>
            </strong>
        </div>
        <div class="operate">
            <a href="javascript:void(0);" class="sui-btn btn-bordered">Add to cart</a>
        </div>
    </div>
    <div class="list-wrap">
        <div class="p-img">
            <img src="./img/_/part03.png"/>
        </div>
        <div class="attr">
            <em>Apple iPhone 6s (A1699)</em>
        </div>
        <div class="price">
            <strong>
                <em>¥</em>
                <i>6088.00</i>
            </strong>
        </div>
        <div class="operate">
            <a href="javascript:void(0);" class="sui-btn btn-bordered">Add to cart</a>
        </div>
    </div>
    </li>
    </ul>
    </div>
    <div id="profile" class="tab-pane">
        <p>Recommended brand</p>
    </div>
    </div>
    </div>
    <div class="fr detail">
        <div class="clearfix fitting">
            <h4 class="kt">Choose a match</h4>
            <div class="good-suits">
                <div class="fl master">
                    <div class="list-wrap">
                        <div class="p-img">
                            <img src="./img/_/l-m01.png"/>
                        </div>
                        <em>￥5299</em>
                        <i>+</i>
                    </div>
                </div>
                <div class="fl suits">
                    <ul class="suit-list">
                        <li class="">
                            <div id="">
                                <img src="./img/_/dp01.png"/>
                            </div>
                            <i>Feless Feless VR</i>
                            <label data-toggle="checkbox" class="checkbox-pretty">
                                <input type="checkbox">
                                <span>39</span>
                            </label>
                        </li>
                        <li class="">
                            <div id="">
                                <img src="./img/_/dp02.png"/></div>
                            <i>Feless Feless VR</i>
                            <label data-toggle="checkbox" class="checkbox-pretty">
                                <input type="checkbox">
                                <span>50</span>
                            </label>
                        </li>
                        <li class="">
                            <div id="">
                                <img src="./img/_/dp03.png"/>
                            </div>
                            <i>Feless Feless VR</i>
                            <label data-toggle="checkbox" class="checkbox-pretty">
                                <input type="checkbox">
                                <span>59</span>
                            </label>
                        </li>
                        <li class="">
                            <div id="">
                                <img src="./img/_/dp04.png"/>
                            </div>
                            <i>Feless Feless VR</i>
                            <label data-toggle="checkbox" class="checkbox-pretty">
                                <input type="checkbox">
                                <span>99</span>
                            </label>
                        </li>
                    </ul>
                </div>
                <div class="fr result">
                    <div class="num">0 items have been purchased</div>
                    <div class="price-tit">
                        <strong>Package price</strong>
                    </div>
                    <div class="price">￥5299</div>
                    <button class="sui-btn btn-danger addshopcar">Add to shopping cart</button>
                </div>
            </div>
        </div>
        <div class="tab-main intro">
            <ul class="sui-nav nav-tabs tab-wraped">
                <li class="active">
                    <a href="#one" data-toggle="tab">
                        <span>Product introduction</span>
                    </a>
                </li>
                <li>
                    <a href="#two" data-toggle="tab">
                        <span>Specifications and packaging</span>
                    </a>
                </li>
                <li>
                    <a href="#three" data-toggle="tab">
                        <span>After-sales guarantee</span>
                    </a>
                </li>
                <li>
                    <a href="#four" data-toggle="tab">
                        <span>Product Evaluation</span>
                    </a>
                </li>
                <li>
                    <a href="#five" data-toggle="tab">
                        <span>Mobile community</span>
                    </a>
                </li>
            </ul>
            <div class="clearfix"></div>
            <div class="tab-content tab-wraped">
                <div id="one" class="tab-pane active">
                    <ul class="goods-intro unstyled">
                        <li>Resolution: 1920*1080(FHD)</li>
                        <li>Rear camera: 12 million pixels</li>
                        <li>Front camera: 5 million pixels</li>
                        <li>Number of audits: other</li>
                        <li>Frequency: Subject to official website information</li>
                        <li>Brand: Apple</li>
                        <li>Product name: APPLEiPhone 6s Plus</li>
                        <li>Product ID: 1861098</li>
                        <li>Product gross weight: 0.51kg</li>
                        <li>Product origin: Mainland China</li>
                        <li>Hot spot: fingerprint recognition, Apple Pay, metal body, camera artifact</li>
                        <li>System: Apple (IOS)</li>
                        <li>Pixel: 10-16 million </li>
                        <li>Body memory: 64GB</li>
                    </ul>
                    <div class="intro-detail">
                        <img src="./img/_/intro01.png"/>
                        <img src="./img/_/intro02.png"/>
                        <img src="./img/_/intro03.png"/>
                    </div>
                </div>
                <div id="two" class="tab-pane">
                    <p>Specifications and packaging</p>
                </div>
                <div id="three" class="tab-pane">
                    <p>After-sales guarantee</p>
                </div>
                <div id="four" class="tab-pane">
                    <div class="comment">
                        <div class="com-tit">Product evaluation</div>
                        <div class="com-percent">
                            <p>Praise rating
                                <span class="percent">96%</span>
                            </p>
                        </div>
                        <div class="com-tab-type">
                            <ul class="type">
                                <li class="current">
                                    <a href="javascript:;">All reviews (123456)</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Picture(500)</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Review (500)</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Praise (500)</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Medium review (500)</a>
                                </li>
                                <li>
                                    <a href="javascript:;">Bad reviews (500)</a>
                                </li>
                            </ul>
                            <div class="content">
                                <div class="com-item" v-for="commentInfo in commentList" :key="commentInfo.id">
                                    <div class="user-column">
                                        <div class="username">
                                                        <img :src="commentInfo.headImg" width="30"/>{{ commentInfo.nickName }}
                                                    </div>
                                                    <div class="usernum">品享值258698</div>
                                                </div>
                                                <div class="user-info">
                                                    <div class="stars star4"></div>
                                                    <p>{{ commentInfo.commentTxt }}</p>
                                                    <div class="guige">
                                                        <ul class="mini">
                                                            <li>玫瑰金</li>
                                                            <li>标配版</li>
                                                            <li>{{ commentInfo.createTime }}</li>
                                                        </ul>
                                                        <div class="operate">
                                                            <span id="collect"><i class="sui-icon icon-tb-like"></i> 325</span>
                                                            <span id="comment"><i class="sui-icon icon-tb-wang"></i> 256</span>
                                                        </div>
                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="five" class="tab-pane">
                                <p>手机社区</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--like-->
            <div class="clearfix"></div>
            <div class="like">
                <h4 class="kt">猜你喜欢</h4>
                <div class="like-list">
                    <ul class="yui3-g">
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="./img/_/itemlike01.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL戴尔Ins 15MR-7528SS 15英寸 银色 笔记本</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>3699.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">已有6人评价</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap"><div class="p-img">
                                <img src="./img/_/itemlike02.png"/>
                            </div>
                                <div class="attr">
                                    <em>Apple iPhone 6s/6s Plus 16G 64G 128G</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4388.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">700 people commented</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="./img/_/itemlike03.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL Dell Ins 15MR-7528SS 15-inch silver notebook</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">700 people commented</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="./img/_/itemlike04.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL Dell Ins 15MR-7528SS 15-inch silver notebook</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">700 people commented</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="./img/_/itemlike05.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL Dell Ins 15MR-7528SS 15-inch silver notebook</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">700 people commented</i>
                                </div>
                            </div>
                        </li>
                        <li class="yui3-u-1-6">
                            <div class="list-wrap">
                                <div class="p-img">
                                    <img src="./img/_/itemlike06.png"/>
                                </div>
                                <div class="attr">
                                    <em>DELL Dell Ins 15MR-7528SS 15-inch silver notebook</em>
                                </div>
                                <div class="price">
                                    <strong>
                                        <em>¥</em>
                                        <i>4088.00</i>
                                    </strong>
                                </div>
                                <div class="commit">
                                    <i class="command">700 people commented</i>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
    </div>
    </div>
    <!-- Bottom column -->
    <!--Bottom of the page-->
    <div class="clearfix footer">
        <div class="py-container">
            <div class="footlink">
                <div class="clearfix Mod-list">
                    <div class="yui3-g">
                        <div class="yui3-u-1-6">
                            <h4>Shopping Guide</h4>
                            <ul class="unstyled">
                                <li>Shopping process</li>
                                <li>Member Introduction</li>
                                <li>Life travel/group purchase</li>
                                <li>Frequently asked questions</li>
                                <li>Shopping guide</li>
                            </ul>

                        </div>
                        <div class="yui3-u-1-6">
                            <h4>Delivery method</h4>
                            <ul class="unstyled">
                                <li>Home pick up</li>
                                <li>211 Limited Time Up</li>
                                <li>Distribution service inquiry</li>
                                <li>Delivery fee charging standard</li>
                                <li>Overseas delivery</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>Payment method</h4>
                            <ul class="unstyled">
                                <li>Cash on delivery</li>
                                <li>Online payment</li>
                                <li>Instalment payment</li>
                                <li>Post office remittance</li>
                                <li>Company transfer</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>After-sales service</h4>
                            <ul class="unstyled">
                                <li>After-sales policy</li>
                                <li>Price protection</li>
                                <li>Refund instructions</li>
                                <li>Repair/return/exchange</li>
                                <li>Cancel order</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>Special Services</h4>
                            <ul class="unstyled">
                                <li>Treasure Island</li>
                                <li>DIY installation</li>
                                <li>Extended Warranty Service</li>
                                <li>Shangpinhui E Card</li>
                                <li>Shangpinhui Communication</li>
                            </ul>
                        </div>
                        <div class="yui3-u-1-6">
                            <h4>Help Center</h4>
                            <img src="/img/wx_cz.jpg">
                        </div>
                    </div>
                </div>
                <div class="Mod-copyright">
                    <ul class="helpLink">
                        <li>About us<span class="space"></span></li>
                        <li>Contact us<span class="space"></span></li>
                        <li>About us<span class="space"></span></li>
                        <li>Businesses settled in<span class="space"></span></li>
                        <li>Marketing Center<span class="space"></span></li>
                        <li>Friendly link<span class="space"></span></li>
                        <li>About us<span class="space"></span></li>
                        <li>Marketing Center<span class="space"></span></li>
                        <li>Friendly link<span class="space"></span></li>
                        <li>About us</li>
                    </ul>
                    <p>Address: 6th Floor, Comprehensive Building, Hongfu Science Park, Changping District, Beijing</p>
                    <p>Beijing ICP No. 19006430</p>
                </div>
            </div>
        </div>
    </div>
    <!--Bottom of the pageEND-->
    <!--Start of sidebar panel-->
    <div class="J-global-toolbar">
        <div class="toolbar-wrap J-wrap">
            <div class="toolbar" :style="coupon.more == 0 ? 'width:59px;' : 'width:270px;'">
                <div class="toolbar-panels J-panel">

                    <!-- 购物车 -->
                    <div style="visibility: hidden;" class="J-content toolbar-panel tbar-panel-cart toolbar-animate-out">
                        <h3 class="tbar-panel-header J-panel-header">
                            <a href="" class="title"><i></i><em class="title">购物车</em></a>
                            <span class="close-panel J-close" onclick="cartPanelView.tbar_panel_close('cart');"></span>
                        </h3>
                        <div class="tbar-panel-main">
                            <div class="tbar-panel-content J-panel-content">
                                <div id="J-cart-tips" class="tbar-tipbox hide">
                                    <div class="tip-inner">
                                        <span class="tip-text">have not logged in yet, the product will be saved after logging in</span>
                                        <a href="#none" class="tip-btn J-login">Log in</a>
                                    </div>
                                </div>
                                <div id="J-cart-render">
                                    <!-- List -->
                                    <div id="cart-list" class="tbar-cart-list">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Subtotal -->
                        <div id="cart-footer" class="tbar-panel-footer J-panel-footer">
                            <div class="tbar-checkout">
                                <div class="jtc-number"><strong class="J-count" id="cart-number">0</strong> items</div>
                                <div class="jtc-sum"> Total: <strong class="J-total" id="cart-sum">¥0</strong></div>
                                <a class="jtc-btn J-btn" href="#none" target="_blank">Go to the shopping cart for settlement</a>
                            </div>
                        </div>
                    </div>

                    <!-- My attention -->
                    <div style="visibility: hidden;" data-name="follow" class="J-content toolbar-panel tbar-panel-follow">
                        <h3 class="tbar-panel-header J-panel-header">
                            <a href="#" target="_blank" class="title"> <i></i> <em class="title">My following</em> </a>
                            <span class="close-panel J-close" onclick="cartPanelView.tbar_panel_close('follow');"></span>
                        </h3>
                        <div class="tbar-panel-main">
                            <div class="tbar-panel-content J-panel-content">
                                <div class="tbar-tipbox2">
                                    <div class="tip-inner"><i class="i-loading"></i></div>
                                </div>
                            </div>
                        </div>
                        <div class="tbar-panel-footer J-panel-footer"></div>
                    </div>

                    <!-- My coupon -->
                    <div id="coupon-div" class="J-content toolbar-panel tbar-panel-history toolbar-animate-in">
                        <h3 class="tbar-panel-header J-panel-header coupon-more">
                            <a href="#none" class="title"> <i></i> <em class="title">My coupon</em> </a>
                            <span class="close-panel J-close" onclick="cartPanelView.tbar_panel_close('history');"></span>
                        </h3>
                        <div class="tbar-panel-main">
                            <div class="tbar-panel-content J-panel-content">
                                <div class="jt-history-wrap" style="height: 1000px;overflow-y: scroll;">
                                    <ul style="overflow:auto;">

                                        <li v-for="couponInfo in couponInfoList" :key="couponInfo.id" class="jth-item" style="width: 190px;height:100%; padding: 10px 10px;">
                                            <div class="coupon-price">
                                                <span class="token" v-if="couponInfo.couponType =='CASH'">{{ couponInfo.benefitAmount }}yuan</span>
                                                <span class="token" v-if="couponInfo.couponType =='DISCOUNT'">{{ couponInfo.benefitDiscount }} discount</span>
                                                <span class="token" v-if="couponInfo.couponType =='FULL_REDUCTION'">{{ couponInfo.benefitAmount }}yuan</span>
                                                <span class="token" v-if="couponInfo.couponType == 'FULL_DISCOUNT'">{{ couponInfo.benefitDiscount }}折</span>

                                                <span class="coupon-name" v-if="couponInfo.couponType == 'CASH'">现金券</span>
                                                <span class="coupon-name" v-if="couponInfo.couponType =='DISCOUNT'">Discount coupon</span>
                                                <span class="coupon-name" v-if="couponInfo.couponType =='FULL_REDUCTION'">Full reduction</span>
                                                <span class="coupon-name" v-if="couponInfo.couponType =='FULL_DISCOUNT'">Full piece discount coupon</span>
                                            </div>
                                            <div class="coupon-info">
                                                <span class="condition" v-if="couponInfo.couponType =='CASH'">Cash coupon {{ couponInfo.benefitAmount }} yuan</span>
                                                <span class="condition" v-if="couponInfo.couponType =='DISCOUNT'">Discount coupon {{ couponInfo.benefitDiscount }} discount</span>
                                                <span class="condition" v-if="couponInfo.couponType =='FULL_REDUCTION'">Full {{ couponInfo.conditionAmount }} minus {{ couponInfo.benefitAmount }} yuan</span>
                                                <span class="condition" v-if="couponInfo.couponType =='FULL_DISCOUNT'">Full {{ couponInfo.conditionNum }} discounts for {{ couponInfo.benefitDiscount }}</span>

                                                <p>{{ couponInfo.rangeDesc }}</p>
                                            </div>
                                            <p class="coupon-time">Expiration time: {{ couponInfo.expireTime }}</p>
                                            <div class="coupon-seal" v-if="couponInfo.isGet> 0 && couponInfo.couponStatus =='NOT_USED'"></div>
                                            <div class="coupon-term" v-if="couponInfo.isGet> 0 && couponInfo.couponStatus =='USED'"></div>
                                            <button type="button" class="sui-btn btn-primary btn-large hm-action-statistics" @click="getCouponInfo(couponInfo.id)" v-if="couponInfo.isGet == 0" :hm -action = "'{\'action_id\':\'get_coupon\', \'item_type\': \'couponId\', \'item\':'+couponInfo.id+'}'">Collar&nbsp;get </button>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="tbar-panel-footer J-panel-footer"></div>
                    </div>

                </div>

                <div class="toolbar-header"></div>

                <!-- Sidebar button -->
                <div class="toolbar-tabs J-tab">
                    <div onclick="cartPanelView.tabItemClick('cart')" class="toolbar-tab tbar-tab-cart" data="cart"
                         tag="cart">
                        <i class="tab-ico"></i>
                        <em class="tab-text"></em>
                        <span class="tab-sub J-count "id="tab-sub-cart-count">0</span>
                    </div>
                    <div onclick="cartPanelView.tabItemClick('follow')" class="toolbar-tab tbar-tab-follow" data="my attention"
                         tag="follow">
                        <i class="tab-ico"></i>
                        <em class="tab-text"></em>
                        <span class="tab-sub J-count hide">0</span>
                    </div>
                    <div onclick="cartPanelView.tabItemClick('history')" class="toolbar-tab tbar-tab-history" data="my footprint"
                         tag="history">
                        <i class="tab-ico"></i>
                        <em class="tab-text"></em>
                        <span class="tab-sub J-count hide">0</span>
                    </div>
                </div>

                <div class="toolbar-footer">
                    <div class="toolbar-tab tbar-tab-top"><a href="#"> <i class="tab-ico  "></i> <em
                            class="footer-tab-text">顶部</em> </a></div>
                    <div class="toolbar-tab tbar-tab-feedback"><a href="#" target="_blank"> <i class="tab-ico"></i> <em
                            class="footer-tab-text ">反馈</em> </a></div>
                </div>

                <div class="toolbar-mini"></div>

            </div>

            <div id="J-toolbar-load-hook"></div>


        </div>
    </div>
</div>
<script type="text/javascript" src="/js/plugins/sui/sui.min.js"></script>
<script type="text/javascript" src="/js/plugins/jquery.jqzoom/jquery.jqzoom.js"></script>
<script type="text/javascript" src="/js/plugins/jquery.jqzoom/zoom.js"></script>
<script src="/js/api/activity.js"></script>
<script src="/js/api/favorInfo.js"></script>
<script src="/js/api/comment.js"></script>
<script th:inline="javascript">
    var item = new Vue({
        el: '#itemArray',
        data: {
            skuId: [[${skuInfo.id}]],
            spuId: [[${skuInfo.spuId}]],
            valuesSku: '',
            skuNum: 1,

            selectValuesSkus: [],
            isAddCart: true,

            spuSaleAttrList: [[${spuSaleAttrList}]],
            valuesSkuJson: [[${valuesSkuJson}]],
            activityRuleList: [],
            couponInfoList: [],
            coupon: {
                more: 0, // 0: hide 1: show
            },

            favorLable:'Follow',

            commentList: [], // list
            total: 0, // total number of records in the database
            page: 1, // Default page number
            limit: 10 // number of records per page
        },

        created() {
            this.init()
        },

        methods: {
            init() {
                this.spuSaleAttrList.forEach((spuSaleAttr, index) => {
                    spuSaleAttr.index = index
                    spuSaleAttr.spuSaleAttrValueList.forEach((spuSaleAttrValue) => {
                        if (spuSaleAttrValue.isChecked == 1) {
                            this.selectValuesSkus.push(spuSaleAttrValue.id)
                        }
                    })
                })
                console.log('this.valuesSku:' + this.valuesSku)

                //Initialize promotions and coupons
                this.findActivityAndCoupon()

                //Whether to follow
                this.isFavor()

                //comment list
                this.getCommentPageList(1)
            },

            addToCart() {
                // Determine whether to log in and whether there is a temporary user, if there are none, add a temporary user
                if(!auth.isTokenExist() && !auth.isUserTempIdExist()) {
                    auth.setUserTempId()
                }

                // Get source information
                var sourceType ='query'
                var key ='sourceType_'+this.skuId
                if(auth.isExist(key)) {
                    sourceType = auth.getCookie(key)
                    auth.removeCookie(key)
                }

                window.location.href ='http://cart.gmall.com/addCart.html?skuId=' + this.skuId +'&skuNum=' + this.skuNum +'&sourceType=' + sourceType
            },

            /*index: color or version spuSaleAttrValueId: sales attribute value Id*/
            spuSaleAttrFun(index, spuSaleAttrValueId) {
                // debugger
                this.isAddCart = true
                /* Turn the Json string into an object
                  One of the object representation methods:
                    var valuesSkuJson = {
                        skuid:"46",
                        value_ids:"126|124"
                    }
                */
                var valuesSkuJson = JSON.parse(this.valuesSkuJson);

                //According to the index, replace the selected spuSaleAttrValueId record the selected color sales attribute value Id, or the version sales attribute value Id
                this.selectValuesSkus[index] = spuSaleAttrValueId

                // value_ids=126|124
                var valuesSku = this.selectValuesSkus.join('|')
                //Check whether there is a skuId in the newly assembled data, if it does, jump to the page, if it does not exist, control the selected state
                /*curSkuId = valuesSkuJson["126|124"] curSkuId = 46*/
                var curSkuId = valuesSkuJson[valuesSku]

                if (curSkuId) {
                    /*curSkuId = 46 this.skuId: indicates the skuId currently being displayed*/
                    if(curSkuId != this.skuId) {
                        window.location.href ='/' + curSkuId +'.html'
                    } else {
                        this.isAddCart = true
                    }
                } else {
                    //Control whether the shopping cart is optional
                    this.isAddCart = false
                }

                //Control whether the sales attribute is selected
                this.spuSaleAttrList.forEach((spuSaleAttr, i) => {
                    spuSaleAttr.spuSaleAttrValueList.forEach((spuSaleAttrValue) => {
                        if (index == i) {
                            if (spuSaleAttrValueId == spuSaleAttrValue.id) {
                                spuSaleAttrValue.isChecked = 1
                            } else {
                                spuSaleAttrValue.isChecked = 0
                            }
                        }
                    })
                })
            },

            add() {
                this.skuNum += 1
            },

            down() {
                if (this.skuNum> 1) {
                    this.skuNum -= 1
                }
            },

            compare(val1,val2){
                return val1-val2;
            },

            couponMore() {
                if(this.coupon.more == 0) {
                    this.coupon.more = 1

                    // Dynamically set the height of the floating layer on the right to the height of the visible area of ​​the browser, and more scroll bars appear
                    $(".jt-history-wrap").css("height", $(window).height()-5)
                } else {
                    this.coupon.more = 0
                }
            },

            findActivityAndCoupon() {
                activity.findActivityAndCoupon(this.skuId).then(response => {
                    this.activityRuleList = response.data.data.activityRuleList
                    this.couponInfoList = response.data.data.couponInfoList
                })
            },

            getCouponInfo(couponId) {
                activity.getCouponInfo(couponId).then(response => {
                    this.couponInfoList.forEach(item => {
                        if(couponId == item.id) {
                            // Received
                            item.isGet = 1
                            // Unused
                            item.couponStatus ='NOT_USED'
                        }
                    })
                })
            },

            isFavor() {
                favorInfo.isFavor(this.skuId).then(response => {
                    if(response.data.data) {
                        this.favorLable ='Followed'
                    }
                })
            },

            addFavor() {
                var param = {
                    spuId: this.spuId,
                    skuId: this.skuId
                }
                favorInfo.add(param).then(response => {
                    this.favorLable ='Followed'
                })
            },

            getCommentPageList(page = 1) {
                this.page = page
                comment.getPageList(this.skuId, this.page, this.limit).then(response => {
                    this.commentList = response.data.data.records
                    this.total = response.data.data.total
                })
            }

        }
    })
</script>
</body>
</html>
